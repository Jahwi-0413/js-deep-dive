# 12장 함수

## 12.1 함수란?

함수는 자바스크립트에서 정확히 이해해야하는 아주 중요한 파트다.
프로그래밍 언어의 함수란, 일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것 이다.

- 함수 정의
  
  ```javascript
  function add(x, y) {
    return x + y;
  }
  ```

- 함수 호출
  
  ```javascript
  const res = add(2, 3);
  console.log(res); //5
  ```

## 12.2 함수를 사용하는 이유

코드를 재사용하기 위해서
재사용성이 높은 함수는 **유지보수의 편의성**을 높이고 실수를 줄여 **코드의 신뢰성**을 높임
코드의 가독성도 향상시킴

## 12.3 함수 리터럴

function 키워드, 함수 이름, 매개 변수 목록, 함수 몸체로 구성됨

```javascript
function add(x, y) {
  return x + y;
}
```

함수 리터럴도 평가되어 값을 생성하므로 함수도 객체임
일반 객체는 호출할 수 없지만 함수는 호출할 수 있음.
일반 객체에는 없는 함수 객체만의 고유한 프로퍼티를 가짐.

## 12.4 함수 정의

- 함수 선언문
  
  ```javascript
  function add(x, y) {
    return x + y;
  }
  ```

- 함수 표현식
  
  ```javascript
  const add = function (x, y) {
    return x + y;
  };
  ```

- Function 생성자 함수
  
  ```javascript
  const add = new Function("x", "y", "return x+y");
  ```

- 화살표 함수
  
  ```javascript
  const add = (x, y) => x + y;
  ```

> 변수 선언, 함수 정의
> 
> 변수는 선언했다고 표현함
> 함수는 선언문이 평가되면 식별자가 암묵적으로 생성되고 함수 객체가 할당됨
> ECMAScript 사양에서도 함수는 정의했다고 표현함

### 12.4.1 함수 선언문

```javascript
function add(x,y){
  return x+;y;
}

//함수 참조
console.dir(add);   //dir은 객체 프로퍼티까지 모두 출력
//함수 호출
console.log(add(2,3)); //5
```

함수 선언문은 함수 이름을 생략할 수 없음
함수 선언문은 **표현식이 아닌 문**이다. (5.6장)

함수는 함수 이름으로 호출하는것이 아니라 함수 객체를 가리키는 식별자로 호출한다.

### 12.4.2 함수 표현식

일급 객체 -> 변수에 할당할 수도 있고 프로퍼티 값도 될 수 있고, 배열의 요소가 될 수 있는 객체
자바스크립트의 함수는 **일급 객체**다.

```javascript
const add = function (x, y) {
  return x + y;
};

console.log(add(2, 3)); //5
```

함수 리터럴로 생성한 함수 객체를 변수에 할당한 것을 함수 표현식이라 함
함수 리터럴은 함수 이름을 생략할 수 있다.
호출은 함수 이름이 아닌 함수 객체를 가리키는 식별자를 사용해야함

```javascript
const add = function addFunc(x, y) {
  return x + y;
};

console.log(add(2, 3)); //5
console.log(addFunc(2, 3)); //ReferenceError
```

### 12.4.3 함수 생성 시점과 함수 호이스팅

```javascript
console.log(add); //[Function: add]
console.log(sub); //undefined

function add(x, y) {
  return x + y;
}
var sub = function (x, y) {
  return x - y;
};
```

함수 선언문으로 함수를 정의하면 함수 호이스팅으로 런타임 이전에 함수 객체가 먼저 생성됨

> 변수 호이스팅 vs 함수 호이스팅
> 변수 호이스팅 -> 런타임 이전에 식별자를 생성함
> 함수 호이스팅 -> 암묵적으로 생성된 식별자는 함수 객체로 초기화됨.

함수 표현식으로 함수를 정의하면 함수 호이스팅이 아닌 변수 호이스팅이 발생함
함수 선언문으로 생성된 함수는 호출전에 함수 선언이 필요하다는 규칙을 무시하므로 함수 표현식 사용 권장

### 12.4.4 Function 생성자 함수

매개변수 목록과 함수 몸체를 문자열에 전달해 new 연산자로 생성함

> 생성자 함수
> 객체를 생성하는 함수

```javascript
const add = new Function("x", "y", "return x+y");
console.log(add(2, 3)); //5
```

이 방식은 일반적이지 않고 바람직하지도 않음
**클로저를 생성하지 않고** 다른 방식과는 다르게 작동함

### 12.4.5 화살표 함수

ES6에서 도입됨.
화살표 함수는 항사 익명 함수로 정의함

```javascript
const add = (x, y) => x + y;
```

표현법만 간략한 것이 아니라 내부 동작도 간략화되어있음

- 화살표 함수는 생성자 함수로 사용할 수 없음
- 기존 함수와 this 바인딩 방식이 다름
- prototype 프로퍼티가 없음
- arguments 개게를 생성하지 않음

## 12.5 함수 호출

### 12.5.1 매개변수와 인수

매개변수는 함수를 정의할때 함수 몸체 내부에서 암묵적으로 undefined로 초기화된 후 순서대로 할당됨
함수는 매개변수의 개수와 인수의 개수가 일치하는지 체크하지 않음
초과된 인수는 버려지지 않고 arguments 객체의 프로퍼티로 보관됨

### 12.5.2 인수 확인

자바스크립트는 인수가 제대로 전달되었는지 확인하지 않기 때문에 런타임시 에러가 발생할 수 있다.
그래서 인수를 제대로 받았는지 확인하거나 default 값을 지정해줄 필요가 있다.

### 12.5.3 매개변수의 최대 개수

이상적인 매개변수 개수는 0개이다.
이상적인 함수는 한가지 일만 해야함
매개변수는 최대 3개 이상을 넘지 않는것을 권장함

### 12.5.4 반환문

반환문은 함수의 실행을 중단하고 함수 몸체를 빠져나감
반환문은 return 키워드 뒤의 표현식이 명시되지 않으면 undefined가 반환됨
반환문 생략시 undefined 반환

## 12.6 참조에 의한 전달과 외부 상태의 변경

call by reference로 side effect 발생 가능 -> 객체를 불변 객체로 만들어 사용해야함 -> 깊은 복사 사용

## 12.7 다양한 함수의 형태

### 12.7.1 즉시 실행 함수

```javascript
(function () {
  //...
});
```

함수 선언이 아닌 함수 리터럴로 평가되어 즉시 실행함
반드시 ()로 묶어야됨

### 12.7.2 재귀 함수

자기 자신을 호출하는 함수

### 12.7.3 중첩 함수

함수 내부에 정의된 함수
자신을 포함하는 외부 함수를 돕는 헬퍼 함수의 역할
외부 함수의 변수를 참조할 수 있음

### 12.7.4 콜백 함수

매개변수를 통해 다른 함수의 내부로 전달받는 함수
외부에서 콜백 함수를 전달받은 함수를 고차함수(HOF)라고 함
고차 함수는 콜백 함수를 자신의 일부분으로 합성함

### 12.7.5 순수 함수와 비순수 함수

- 순수 함수
  - 부수 효과가 없는 함수
  - 순수 함수는 동일한 인수가 전달되면 동일한 값을 반환함
  - 최소 하나 이상의 인수를 전달받음
  - 외부 상태에 의존하지 않고 외부 상태를 변경하지도 않는 함수
- 비순수 함수
  - 부수 효과가 있는 함수
